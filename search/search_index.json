{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":"Agent-Flavored Markdown <p>No-code, portable agents</p> Read the Specification Browse Examples Try a Reference Implementation code-review-assistant.afm.md <pre><code>---\nspec_version: \"0.3.0\"\nname: \"Code Review Assistant\"\ndescription: \"AI assistant for code review and improvements\"\nmodel:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\ntools:\n  mcp:\n    - name: \"github\"\n      transport:\n        type: \"http\"\n        url: \"https://api.githubcopilot.com/mcp/\"\n        authentication:\n          type: \"bearer\"\n          token: \"${env:GITHUB_TOKEN}\"\n      tool_filter:\n        allow:\n          - \"pull_request_read\"\n          - \"get_file_contents\"\ninterfaces:\n  - type: webchat\n    exposure:\n      http:\n        path: \"/code-review\"\n---\n\n# Role\n\nYou are a code review assistant focused on security, correctness, and best practices.\n\n# Instructions\n\nReview code systematically:\n\n1. **Security**: Check for vulnerabilities\n2. **Correctness**: Find logic errors and edge cases\n3. **Performance**: Identify bottlenecks\n4. **Maintainability**: Flag unclear patterns\n5. **Testing**: Verify test coverage\n\nFor each issue, explain why it matters and suggest improvements with examples. \nAcknowledge good practices.\n</code></pre> Why AFM? <p>A simple, markdown-based format for defining AI agents. Write agents in plain text that any platform can understand and deploy.</p> No code <p>Agent definitions in markdown with frontmatter \u2014 no programming required.</p> Portable <p>Agents that work across platforms and tools. Write once, deploy anywhere \u2014 secure and flexible across environments, interfaces included.</p> Unified <p>A single, declarative format for both code and visual tools \u2014 one file, many experiences.</p>"},{"location":"reference-implementations/","title":"Reference Implementations","text":"<p>The following implementations can be used to run agents from AFM files. They are both interpreters that dynamically generate and run agents based on AFM files.</p> <ul> <li> <p>Ballerina Interpreter for AFM - generates and runs Ballerina agents.</p> <ul> <li>Docker Image</li> <li>Source</li> </ul> </li> <li> <p>LangChain-based Interpreter for AFM - generates and runs LangChain agents.</p> <ul> <li>PyPI (afm-cli)</li> <li>Docker Image</li> <li>Source</li> </ul> </li> </ul>"},{"location":"reference-implementations/#getting-started","title":"Getting Started","text":""},{"location":"reference-implementations/#via-docker","title":"Via Docker","text":"<p>Pull an image to get started. For example,</p> <pre><code>docker pull ghcr.io/wso2/afm-ballerina-interpreter:latest\n</code></pre> <p>Run an agent by mounting your <code>.afm.md</code> file and passing required environment variables. </p> <p>For example, where <code>API_KEY</code> is a required environment variable:</p> <pre><code>docker run -p 8085:8085 \\\n  -e API_KEY=&lt;YOUR-API-KEY&gt; \\\n  -v ./support_agent.afm.md:/support_agent.afm.md \\\n  ghcr.io/wso2/afm-ballerina-interpreter:latest /support_agent.afm.md\n</code></pre>"},{"location":"reference-implementations/#via-pipx-langchain-based-interpreter","title":"Via pipx (LangChain-based Interpreter)","text":"<p>Install the AFM CLI using pipx:</p> <pre><code>pipx install afm-cli\n</code></pre> <p>Note</p> <p><code>pipx</code> installs CLI tools in isolated environments and is the recommended approach on modern systems (Ubuntu 23.04+, Debian 12+, macOS with Homebrew Python, etc.), where <code>pip install</code> to the system Python may be blocked. See pipx.pypa.io for installation instructions.</p> <p>If you are working inside an activated virtual environment, <code>pip install afm-cli</code> works as well.</p> <p>Run an agent, setting any required environment variables beforehand:</p> <pre><code>export API_KEY=&lt;YOUR-API-KEY&gt;\nafm run path/to/agent.afm.md\n</code></pre>"},{"location":"reference-implementations/#supported-model-providers","title":"Supported Model Providers","text":"<p>OpenAI, Anthropic, and the WSO2 provider (with the Ballerina Interpreter) are currently supported.</p> <pre><code>model:\n  provider: \"&lt;PROVIDER-NAME&gt;\" # \"openai\" or \"anthropic\"\n  name: \"&lt;MODEL-NAME&gt;\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:API_KEY}\" # Will look up an environment variable named `API_KEY`\n</code></pre> <p>Note</p> <p>If the WSO2 model provider is used (with the Ballerina interpreter), the model does not have to be configured in the front matter. Just set the default model token as the <code>WSO2_MODEL_PROVIDER_TOKEN</code> environment variable. The token can be generated via the Ballerina: Configure default WSO2 model provider VS Code command with the Ballerina plugin installed.</p>"},{"location":"reference-implementations/#example","title":"Example","text":"<p>Create a simple webchat agent:</p> friendly_assistant.afm.md <pre><code>---\nname: \"Friendly Assistant\"\ndescription: \"A friendly conversational assistant that helps users with various tasks.\"\nversion: \"0.1.0\"\nlicense: \"Apache-2.0\"\ninterfaces:\n  - type: webchat\nmodel:\n  provider: \"openai\"\n  name: \"${env:OPENAI_MODEL}\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\n---\n\n# Role\n\nYou are a friendly and helpful conversational assistant. Your purpose is to engage in\nnatural, helpful conversations with users, answering their questions, providing\ninformation, and assisting with various tasks to the best of your abilities.\n\n# Instructions\n\n- Always respond in a friendly and conversational tone\n- Keep your responses clear, concise, and easy to understand\n- If you don't know something, be honest about it\n- Ask clarifying questions when the user's request is ambiguous\n- Be helpful and try to provide practical, actionable advice\n- Maintain context throughout the conversation\n- Show empathy and understanding in your responses\n</code></pre> <p>Then run it:</p> DockerPython / CLI <pre><code>docker run -p 8085:8085 \\\n  -e OPENAI_MODEL=&lt;YOUR-OPENAI-MODEL&gt; \\\n  -e OPENAI_API_KEY=&lt;YOUR-OPENAI-API-KEY&gt; \\\n  -v ./friendly_assistant.afm.md:/friendly_assistant.afm.md \\\n  ghcr.io/wso2/afm-ballerina-interpreter:latest /friendly_assistant.afm.md\n</code></pre> <pre><code>export OPENAI_MODEL=&lt;YOUR-OPENAI-MODEL&gt;\nexport OPENAI_API_KEY=&lt;YOUR-OPENAI-API-KEY&gt;\n\nafm run friendly_assistant.afm.md\n</code></pre> <p>Access the chat UI at <code>http://localhost:8085/chat/ui</code>.</p> <p>Note</p> <p>When using Docker for console chat interfaces, include the <code>-it</code> options. For example, with the math tutor file, use <pre><code>docker run -it -p 8085:8085 \\\n  -e OPENAI_MODEL=&lt;YOUR-OPENAI-MODEL&gt; \\\n  -e OPENAI_API_KEY=&lt;YOUR-OPENAI-API-KEY&gt; \\\n  -v ./math_tutor.afm.md:/math_tutor.afm.md \\\n  ghcr.io/wso2/afm-ballerina-interpreter:latest /math_tutor.afm.md\n</code></pre></p> <p>Note</p> <p>You can use the Getting Started Template to get started.</p>"},{"location":"specification/","title":"AFM Specification v0.3.0","text":""},{"location":"specification/#1-introduction","title":"1. Introduction","text":"<p>AFM (Agent-Flavored Markdown) is a markdown-based format to define AI agents. It allows agents to be written in text once and reused across different platforms.</p> <p>This document details the AFM file format, its syntax, and the schema for defining an agent.</p> <p>The key words \"MUST\", \"MUST NOT\", \"REQUIRED\", \"SHALL\", \"SHALL NOT\", \"SHOULD\", \"SHOULD NOT\", \"RECOMMENDED\", \"NOT RECOMMENDED\", \"MAY\", and \"OPTIONAL\" in this document are to be interpreted as described in BCP 14 [RFC2119] [RFC8174] when, and only when, they appear in all capitals, as shown here.</p>"},{"location":"specification/#11-key-goals-of-afm","title":"1.1. Key Goals of AFM","text":"<p>AFM unifies agent definition through a text-based standard:</p> <ul> <li> <p>No Code: AFM enables defining an agent's instructions, tools, and configuration in a simple, declarative, text-based format, moving away from complex, imperative code. The markdown-based syntax is intuitive for both developers and non-technical stakeholders to read, write, and understand.</p> </li> <li> <p>Portable: By defining agents declaratively in text rather than code, AFM enables the same agent definition to be interpreted and deployed across diverse platforms and tools.</p> </li> <li> <p>Unified: AFM provides a clean, declarative model that works seamlessly for both developers writing code and those using visual, low-code interfaces. The same AFM file can power both experiences.</p> </li> <li> <p>Adaptable: AFM is designed to be flexible and extensible, allowing the standard to evolve as AI technologies and requirements change.</p> </li> </ul>"},{"location":"specification/#2-core-concepts","title":"2. Core Concepts","text":"<p>AFM defines the following core concepts:</p> <ul> <li>Agent: The primary entity defined by an AFM file, representing an AI agent.</li> <li>Role: The agent's purpose and responsibilities.</li> <li>Instructions: Directives governing the agent's behavior.</li> <li>Details: Metadata describing the agent (name, version, author, etc.).</li> <li>Model: The AI model powering the agent.</li> <li>Tools: External tools and services available to the agent.</li> <li>Interface: How the agent is invoked and its input/output contract.</li> </ul> <p>Agent Memory</p> <p>Given the lack of standardization, AFM does not prescribe a standard for agent memory yet.</p>"},{"location":"specification/#3-file-extension","title":"3. File Extension","text":"<p>An agent definition file MUST use the <code>.afm.md</code> or <code>.afm</code> extension. </p>"},{"location":"specification/#4-syntax-overview","title":"4. Syntax Overview","text":""},{"location":"specification/#41-basic-structure","title":"4.1. Basic Structure","text":"<p>An AFM file is structured into two main sections: the front matter and the agent declaration.</p> <ul> <li>Front Matter: Contains metadata about the agent.</li> <li>Markdown Body: Contains the agent's definition.</li> </ul>"},{"location":"specification/#42-front-matter","title":"4.2. Front Matter","text":"<p>The front matter is a YAML block at the top of the file, enclosed by <code>---</code> lines. Refer to the YAML specification for more details on YAML syntax.</p> <p>This section contains metadata about the agent. These metadata fields are OPTIONAL and can be used to provide additional context or configuration for the agent.</p> Section Description Agent Details Information about the agent, such as its name, description, version, and author. Agent Model Defines the AI model that powers the agent. Agent Interfaces Defines how the agent is invoked and its input/output signature. Agent Tools Defines external tools available to the agent (e.g., via MCP). Agent Execution Runtime execution configuration like iteration limits. <p>Refer to the AFM Schema for a complete list of fields and their meanings.</p>"},{"location":"specification/#43-markdown-body","title":"4.3. Markdown Body","text":"<p>This section contains the detailed instructions that guide the agent's behavior.</p> <p>Users can use markdown syntax to format the text, including headings, lists, links, and code blocks.</p> <p>The Markdown body MUST contain the following headings, with corresponding content.</p> <ul> <li><code># Role</code>: Defines the agent's purpose and responsibilities. This section describes what the agent does and the context in which it operates. This content typically forms the opening context of the system prompt.</li> <li><code># Instructions</code>: Provides directives that shape the agent's behavior, capabilities, and operational guidelines. This section contains the core logic and rules that govern how the agent processes inputs and generates outputs.</li> </ul>"},{"location":"specification/#44-example","title":"4.4. Example","text":"<p>Basic AFM File Example</p> <p>Here is a simple example of an AFM file:</p> <pre><code>---\nspec_version: \"0.3.0\"\nname: \"Math Tutor\"\ndescription: \"An AI assistant that helps with math problems\"\nversion: \"1.0.0\"\nmax_iterations: 20\ninterfaces:\n  - type: consolechat\nmodel:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\ntools:\n  mcp:\n    - name: \"math_operations\"\n      transport:\n        type: \"http\"\n        url: \"${env:MATH_MCP_SERVER}\"\n---\n\n# Role\n\nYou are an experienced math tutor capable of assisting students with mathematics problems, providing explanations, step-by-step \nsolutions, and practice exercises.\n\n# Instructions\n\nYou are a knowledgeable and patient math tutor who helps students understand mathematical concepts. Provide clear, step-by-step \nexplanations for math problems, using simple language and avoiding jargon unless explaining it. \n\nWhen solving problems, show all work and explain each step. Use the available math operations tools when performing calculations. \nExplain mathematical concepts with real-world examples when possible. Be encouraging and supportive of students' efforts, ask clarifying \nquestions if a problem is not clearly stated, provide multiple approaches to solving problems when applicable, help students identify \nand correct their mistakes.\n</code></pre>"},{"location":"specification/#5-schema-definitions","title":"5. Schema Definitions","text":"<p>This section defines the schema for the Front Matter. For clarity, the schema is divided into several subsections, each detailing a specific aspect of the Agent.</p>"},{"location":"specification/#51-agent-details","title":"5.1. Agent Details","text":"<p>This section defines the schema for agent-specific metadata. It is OPTIONAL but recommended for clarity and organization.</p> <p>AFM implementations SHALL use this section to display the agent's metadata in user interfaces to provide better user experience for end users.</p>"},{"location":"specification/#511-schema-overview","title":"5.1.1. Schema Overview","text":"<p>The agent metadata fields are specified in the YAML front matter of an AFM file:</p> <pre><code>spec_version: string   # AFM specification version (e.g., \"0.3.0\")\nname: string           # The name of the agent\ndescription: string    # Brief description of the agent's purpose and functionality\nversion: string        # Semantic version (e.g., \"1.0.0\")\nauthor: string         # Single author in format \"Name &lt;Email&gt;\"\nauthors:               # Takes precedence over the 'author' field if both exist\n  - string             # Multiple authors, each in format \"Name &lt;Email&gt;\"\nprovider: object       # Agent provider\n  name: string         # Name of the organization\n  url: string          # URL to the organization's website\nicon_url: string       # URL to an icon representing the agent\nlicense: string        # License under which the agent is released\n</code></pre>"},{"location":"specification/#agent-field-definitions","title":"5.1.2. Field Definitions","text":"<p>Each field serves a specific purpose in defining and organizing the agent:</p> Key Type Required Description <code>spec_version</code> <code>string</code> No Version of the AFM specification this file conforms to (e.g., \"0.3.0\").This is OPTIONAL but recommended for compatibility.AFM implementations MAY use this field to validate compatibility and provide warnings for mismatched spec versions. <code>name</code> <code>string</code> No Identifies the agent in human-readable form.Default: inferred from the filename of the AFM file.AFM implementations SHALL use this field to display the agent's name in user interfaces. <code>description</code> <code>string</code> No Provides a concise summary of what the agent does.Default: inferred from the markdown body <code># Role</code> section.AFM implementations SHALL use this field to display the agent's description in user interfaces. <code>version</code> <code>string</code> No Semantic version of the agent definition (MAJOR.MINOR.PATCH).Default: \"0.0.0\".AFM implementations SHALL use this field to display the agent's version in user interfaces. <code>author</code> <code>string</code> No Single author in format <code>Name &lt;Email&gt;</code>.Credits the creator of the agent definition. If both <code>author</code> and <code>authors</code> fields are provided, <code>authors</code> takes precedence. <code>authors</code> <code>string[]</code> No Multiple authors, each in format <code>Name &lt;Email&gt;</code>.Credits the creators of the agent definition. Takes precedence over <code>author</code> if both exist. <code>icon_url</code> <code>string</code> No URL to an icon representing the agent.This is OPTIONAL but recommended for visual representation in user interfaces.AFM implementations SHALL use this field to display the agent's icon in user interfaces. <code>provider</code> <code>object</code> No Information about the organization providing the agent.This is OPTIONAL but recommended for attribution.See the Provider Object below for details. <code>license</code> <code>string</code> No License under which the agent definition is released.This is OPTIONAL but recommended for clarity. <p>Provider Object:</p> Key Type Required Description <code>name</code> <code>string</code> No Name of the organization providing the agent. <code>url</code> <code>string</code> No URL to the organization's website."},{"location":"specification/#513-example-usage","title":"5.1.3. Example Usage","text":"<p>The following example demonstrates a valid agent metadata section as specified in Section 5.1. This YAML front matter illustrates the use of recommended and optional fields for agent definition:</p> <pre><code>---\nspec_version: \"0.3.0\"\nname: \"Math Tutor\"\ndescription: \"An AI assistant that helps with math problems\"\nversion: \"1.2.0\"\nauthors:\n  - \"Jane Smith &lt;jane@example.com&gt;\"\n  - \"John Doe &lt;john@example.com&gt;\"\nprovider:\n  name: \"Example AI Solutions\"\n  url: \"https://example.com\"\nicon_url: \"https://example.com/icons/math-tutor.png\"\nlicense: \"MIT\"\n---\n</code></pre>"},{"location":"specification/#52-agent-model","title":"5.2. Agent Model","text":"<p>This section specifies the AI model or language model that powers the agent. It is OPTIONAL and defines how to access and authenticate with the model service.</p>"},{"location":"specification/#521-field-definitions","title":"5.2.1. Field Definitions","text":"Key Type Required Description <code>name</code> <code>string</code> No Model identifier or name. <code>provider</code> <code>string</code> No The organization or service providing the model (e.g., \"openai\", \"anthropic\"). <code>url</code> <code>string</code> No The URL endpoint for the model service. <code>authentication</code> <code>object</code> No Authentication configuration for accessing the model. See Section 5.6 for the schema."},{"location":"specification/#522-schema-overview","title":"5.2.2. Schema Overview","text":"<pre><code>model:\n  name: string             # Optional model name or identifier\n  provider: string         # Optional model provider (e.g., \"openai\", \"anthropic\")\n  url: string              # Optional model service endpoint URL\n  authentication: object   # Optional authentication configuration\n</code></pre>"},{"location":"specification/#523-example-usage","title":"5.2.3. Example Usage","text":"<pre><code>model:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  url: \"https://api.openai.com/v1/chat/completions\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\n</code></pre>"},{"location":"specification/#53-agent-interfaces","title":"5.3. Agent Interfaces","text":"<p>This section defines how an agent can be interacted with or triggered. An agent can have multiple interfaces, allowing it to be accessed in different ways. It is OPTIONAL and specifies how the agent receives inputs and produces outputs.</p> <p>If the <code>interfaces</code> field is not explicitly defined in the front matter, AFM implementations MUST assume a default interface of type <code>consolechat</code>. In this default mode, the agent SHALL be invoked as a command-line chat interface: it MUST accept a single string input (user message) and MUST produce a single string output (agent reply).</p> <p>Users can override these defaults by specifying the <code>interfaces</code> field in the front matter as an array of interface definitions. AFM implementations SHALL use these definitions to generate the agent's callable interfaces and to ensure consistent behavior across different platforms.</p>"},{"location":"specification/#531-interface-types","title":"5.3.1. Interface Types","text":"<p>The <code>interface.type</code> field MUST be one of the following values:</p> Value Description <code>consolechat</code> The agent is exposed as a command-line/terminal chat interface for interactive console-based conversations. <code>webchat</code> The agent is exposed as a web-based chat interface, accessible through browsers with a conversational UI. <code>webhook</code> The agent is exposed as a webhook endpoint and supports subscription details (e.g., WebSub hub integration). <p>Each interface type defines how the agent is triggered and interacted with. Implementations MAY support all three types as described above.</p>"},{"location":"specification/#532-schema-overview","title":"5.3.2. Schema Overview","text":"<pre><code>interfaces:\n  - type: consolechat | webchat | webhook\n    prompt: string              # For webhook type: template string for constructing the user prompt for the agent run\n    signature:\n      input: object             # JSON Schema object defining input parameters\n      output: object            # JSON Schema object defining output parameters\n    # Optional, depending on type:\n    exposure:                   # For webchat/webhook types only\n      http: object              # Configuration for exposing as an HTTP endpoint.\n    subscription:               # For webhook type\n      protocol: string          # e.g., \"websub\"\n      hub: string               # Subscription hub URL\n      topic: string             # Topic to subscribe to\n      callback: string          # Callback URL for receiving events (optional, for dynamic registration)\n      secret: string            # Secret for verifying webhook payloads (optional)\n      authentication: object    # Authentication configuration for the subscription  (optional)\n</code></pre>"},{"location":"specification/#533-field-definitions","title":"5.3.3. Field Definitions","text":"<p>The <code>interfaces</code> field is an array where each element represents an interface definition.</p> <p>Interface Object:</p> <p>The interface object MUST be one of the following variants, discriminated by the <code>type</code> field.</p> <p>Consolechat Interface:</p> <p>Command-line/terminal chat interface for interactive console-based conversations.</p> Key Type Required Description <code>type</code> <code>string</code> Yes Must be <code>\"consolechat\"</code>. <code>signature</code> <code>object</code> No Defines the agent's input and output parameters. Defaults to string input and string output. See Signature Object. <p>Webchat Interface:</p> <p>Web-based chat interface accessible through browsers with a conversational UI.</p> Key Type Required Description <code>type</code> <code>string</code> Yes Must be <code>\"webchat\"</code>. <code>signature</code> <code>object</code> No Defines the agent's input and output parameters. Defaults to string input and string output. See Signature Object. <code>exposure</code> <code>object</code> No Configuration for how the agent is exposed via HTTP. See Exposure Object. <p>Webhook Interface:</p> <p>Webhook endpoint with subscription support.</p> Key Type Required Description <code>type</code> <code>string</code> Yes Must be <code>\"webhook\"</code>. <code>prompt</code> <code>string</code> No A template string for constructing the user prompt for an agent run from webhook data.Supports variable substitution with HTTP context prefixes:- <code>${http:payload.fieldname}</code> to access webhook payload fields- <code>${http:header.headername}</code> to access HTTP headersWhen provided, this templated prompt is used as the user prompt to the agent.When omitted, the implementation determines how to construct the agent prompt from the webhook payload. <code>signature</code> <code>object</code> No Defines the agent's output parameters. The <code>input</code> field MAY be omitted as the webhook provider determines the input payload structure. See Signature Object. <code>exposure</code> <code>object</code> No Configuration for how the agent is exposed via HTTP. See Exposure Object. <code>subscription</code> <code>object</code> No Subscription configuration. See Subscription Object."},{"location":"specification/#signature-object","title":"Signature Object","text":"<p>Defines the data contract for the agent. The <code>input</code> and <code>output</code> fields MUST conform to the JSON Schema specification, but are expressed in YAML syntax. This allows for:</p> <ul> <li>Simple signatures (e.g., a single string, number, boolean, or array)</li> <li>Complex, structured objects with named properties</li> <li>Full expressiveness of JSON Schema for validation and documentation</li> </ul> <p>Examples:</p> <p>Single string input/output (default):</p> <pre><code>signature:\n  input:\n    type: string\n  output:\n    type: string\n</code></pre> <p>Complex object with properties:</p> <pre><code>signature:\n  input:\n    type: object\n    properties:\n      user_prompt:\n        type: string\n        description: \"The user's query or request\"\n      context:\n        type: object\n        description: \"Additional context for the request\"\n    required: [user_prompt]\n  output:\n    type: object\n    properties:\n      response:\n        type: string\n        description: \"The agent's response to the user prompt\"\n      confidence:\n        type: number\n        description: \"Confidence score for the response\"\n    required: [response]\n</code></pre> <p>Array input/output: <pre><code>signature:\n  input:\n    type: array\n    items:\n      type: string\n  output:\n    type: array\n    items:\n      type: string\n</code></pre></p> <p>Default Behavior:</p> <p>Default signature behavior:</p> <ul> <li> <p>For <code>consolechat</code> and <code>webchat</code> types: the default <code>signature</code> is string input and string output.</p> </li> <li> <p>For <code>webhook</code> type: the <code>input</code> field MAY be omitted, as the webhook provider determines the input payload structure.</p> </li> </ul> <p>AFM implementations SHALL use this definition to generate the agent's callable interface and to ensure consistent behavior across different platforms.</p> <p> Subscription Object:</p> Key Type Required Description <code>protocol</code> <code>string</code> Yes The subscription protocol (e.g., <code>websub</code>). <code>hub</code> <code>string</code> No The hub to subscribe at (optional if subscription is registered manually). <code>topic</code> <code>string</code> No The topic to subscribe to (optional if subscription is registered manually). <code>callback</code> <code>string</code> No The callback URL where events should be delivered (optional, for dynamic or self-registration). <code>authentication</code> <code>object</code> No Optional authentication configuration for the webhook subscription. See Section 5.6 for the schema. <code>secret</code> <code>string</code> No A secret used to sign or verify webhook payloads (optional, for security)."},{"location":"specification/#exposure-object","title":"Exposure Object","text":"<p>Applies to agents of type <code>webchat</code> and <code>webhook</code>, and defines how the corresponding services are exposed.</p> Key Type Required Description <code>http</code> <code>object</code> No Defines how to expose the agent via a standard HTTP endpoint. <p>HTTP Object:</p> Key Type Required Description <code>path</code> <code>string</code> No The URL path segment for the agent's HTTP endpoint (e.g., <code>/math-tutor</code>). If not specified, implementations SHOULD use <code>/chat</code> for <code>webchat</code> interfaces and <code>/webhook</code> for <code>webhook</code> interfaces. <p>HTTP Exposure Configuration</p> <p>The <code>http</code> object is applicable for agents of type <code>webchat</code> or <code>webhook</code>. It defines how the agent is exposed via a standard HTTP endpoint, allowing other systems to interact with it over the web.</p> <p>Default Paths:</p> <ul> <li><code>webchat</code>: If no <code>exposure.http.path</code> is specified, implementations SHOULD default to <code>/chat</code></li> <li><code>webhook</code>: If no <code>exposure.http.path</code> is specified, implementations SHOULD default to <code>/webhook</code></li> </ul> <p>AFM does not define the HTTP methods (GET, POST, etc.) for the agent's endpoint. This is left to the implementation to decide based on the agent's functionality and requirements.</p>"},{"location":"specification/#534-example-usages","title":"5.3.4. Example Usages","text":"<p>Web chat agent (default simple string): <pre><code>interfaces:\n  - type: webchat\n    signature:\n      input:\n        type: string\n      output:\n        type: string\n</code></pre></p> <p>Web chat agent (custom with structured input/output): <pre><code>interfaces:\n  - type: webchat\n    signature:\n      input:\n        type: object\n        properties:\n          message:\n            type: string\n            description: \"The user's chat message\"\n          context:\n            type: object\n            description: \"Additional context for the conversation\"\n        required: [message]\n      output:\n        type: object\n        properties:\n          reply:\n            type: string\n            description: \"The agent's chat reply\"\n          confidence:\n            type: number\n            description: \"Confidence score for the response\"\n        required: [reply]\n    exposure:\n      http:\n        path: \"/webchat\"\n</code></pre></p> <p>Console chat agent: <pre><code>interfaces:\n  - type: consolechat\n    signature:\n      input:\n        type: string\n      output:\n        type: string\n</code></pre></p> <p>Webhook agent (with prompt templating): <pre><code>interfaces:\n  - type: webhook\n    prompt: |\n      A new ${http:payload.event} event was received from ${http:header.User-Agent}.\n\n      Event Details:\n      - Type: ${http:payload.event}\n      - Timestamp: ${http:payload.timestamp}\n      - Source: ${http:payload.source}\n\n      Payload:\n      ${http:payload.data}\n\n      Please analyze this webhook event and provide a summary of the action taken.\n    signature:\n      output:\n        type: object\n        properties:\n          result:\n            type: string\n            description: \"The agent's response to the webhook event\"\n        required: [result]\n    subscription:\n      protocol: \"websub\"\n      hub: \"https://example.com/websub-hub\"\n      topic: \"https://example.com/events/agent\"\n      callback: \"https://myagent.example.com/webhook-callback\"\n      secret: \"${env:WEBHOOK_SECRET}\"\n    exposure:\n      http:\n        path: \"/webhook-handler\"\n</code></pre></p>"},{"location":"specification/#54-tools","title":"5.4. Tools","text":"<p>This section defines the tools the agent can access and use.</p>"},{"location":"specification/#541-schema-overview","title":"5.4.1. Schema Overview","text":"<p>The tools fields are specified in the YAML front matter of an AFM file:</p> <pre><code>tools:\n  mcp: array         # List of MCP servers to connect to.\n</code></pre>"},{"location":"specification/#542-field-definitions","title":"5.4.2. Field Definitions","text":"Key Type Required Description <code>tools</code> <code>object</code> No Container for protocol-specific tool connection configurations. <code>tools.mcp</code> <code>array</code> No List of MCP servers to connect to. See Section 6.1 for detailed schema."},{"location":"specification/#543-example-usage","title":"5.4.3. Example Usage","text":"<p>Here's a simple example of tools in an AFM file:</p> <pre><code>tools:\n  mcp:\n    - name: \"github_api\"\n      transport:\n        type: \"http\"\n        url: \"https://api.githubcopilot.com/mcp/\"\n        authentication:\n          type: \"bearer\"\n          token: \"${env:GITHUB_TOKEN}\"\n</code></pre>"},{"location":"specification/#55-agent-execution","title":"5.5. Agent Execution","text":"<p>This section defines execution control and runtime behavior settings for the agent. These settings are OPTIONAL and help AFM implementations manage agent execution safely and efficiently.</p>"},{"location":"specification/#551-schema-overview","title":"5.5.1. Schema Overview","text":"<pre><code>max_iterations: int    # Maximum number of iterations per agent run\n</code></pre>"},{"location":"specification/#552-field-definitions","title":"5.5.2. Field Definitions","text":"Key Type Required Description <code>max_iterations</code> <code>integer</code> No Maximum number of iterations the agent can perform in a single run.This helps prevent infinite loops or runaway execution.Default: Implementation-specific (typically unlimited or a high value like 100).AFM implementations SHOULD respect this limit and gracefully terminate agent execution when the limit is reached."},{"location":"specification/#553-example-usage","title":"5.5.3. Example Usage","text":"<pre><code>max_iterations: 50\n</code></pre>"},{"location":"specification/#56-authentication","title":"5.6. Authentication","text":"<p>This section defines the generic client authentication schema that is used across different parts of the AFM specification, including MCP server connections and webhook subscriptions.</p> <p>The authentication object is OPTIONAL.</p>"},{"location":"specification/#561-schema-overview","title":"5.6.1. Schema Overview","text":"<pre><code>authentication:\n  type: string         # Authentication scheme (bearer, jwt, oauth2, api-key, basic, etc.)\n  # Additional fields depend on the type\n  # Examples:\n  # - For bearer: token\n  # - For basic: username, password\n</code></pre>"},{"location":"specification/#562-field-definitions","title":"5.6.2. Field Definitions","text":"<p>Authentication Object:</p> Key Type Required Description <code>type</code> <code>string</code> Yes Authentication scheme (e.g., <code>bearer</code>, <code>basic</code>, <code>jwt</code>, <code>oauth2</code>).Determines which additional fields are required or supported. <code>*</code> Various Varies Additional fields are authentication-type specific. See examples below for common patterns.Values SHOULD use variable substitution to reference credentials securely."},{"location":"specification/#563-example-usage","title":"5.6.3. Example Usage","text":"<pre><code># Bearer token authentication\nauthentication:\n  type: bearer\n  token: \"${env:API_TOKEN}\"\n\n# Basic authentication\nauthentication:\n  type: basic\n  username: \"${env:API_USERNAME}\"\n  password: \"${env:API_PASSWORD}\"\n</code></pre>"},{"location":"specification/#6-protocol-specifications","title":"6. Protocol Specifications","text":"<p>This section details the protocols that agents use to communicate with external systems and other agents, as referenced in the schema above.</p>"},{"location":"specification/#61-model-context-protocol-mcp","title":"6.1. Model Context Protocol (MCP)","text":"<p>The Model Context Protocol (MCP) enables agents to connect to external tools and data sources.</p>"},{"location":"specification/#611-schema-overview","title":"6.1.1. Schema Overview","text":"<pre><code>mcp:\n  - name: string            # Unique identifier for the server connection\n    transport:\n      type: string          # Transport mechanism (\"http\" or \"stdio\")\n\n      # For HTTP transport:\n      url: string           # URL for the MCP server\n      authentication:       # Optional authentication configuration\n        type: string        # Authentication scheme (bearer, jwt, oauth2, etc.)\n\n      # For STDIO transport:\n      command: string       # Executable command to run\n      args: [string]        # Optional arguments for the command\n      env: {string: string} # Optional environment variables\n\n    tool_filter:            # Optional\n      allow: [string]       # Whitelist of tools\n      deny: [string]        # Blacklist of tools\n</code></pre>"},{"location":"specification/#612-field-definitions","title":"6.1.2. Field Definitions","text":"<p>The <code>mcp</code> field is an array where each element represents an MCP server connection. Each server entry must have a unique <code>name</code> that identifies the connection.</p> <p>MCP Server Object:</p> Key Type Required Description <code>name</code> <code>string</code> Yes A unique, human-readable identifier for the connection. <code>transport</code> <code>object</code> Yes An object defining the transport mechanism. See Transport Object below. <code>tool_filter</code> <code>object</code> No Filter configuration for tools from this server. See Tool Filter Object below. <p>Transport Object:</p> <p>The transport object MUST be one of the following variants, discriminated by the <code>type</code> field.</p> <p>HTTP Transport:</p> <p>Used for connecting to remote MCP servers over HTTP.</p> Key Type Required Description <code>type</code> <code>string</code> Yes Must be <code>\"http\"</code>. <code>url</code> <code>string</code> Yes The URL of the MCP server. <code>authentication</code> <code>object</code> No Authentication configuration. See Section 5.6 for the schema. <p>STDIO Transport:</p> <p>Used for running local MCP servers as subprocesses via standard input/output.</p> Key Type Required Description <code>type</code> <code>string</code> Yes Must be <code>\"stdio\"</code>. <code>command</code> <code>string</code> Yes The executable command to run (e.g., <code>python</code>, <code>node</code>, <code>npx</code>). <code>args</code> <code>string[]</code> No An array of arguments to pass to the command. <code>env</code> <code>map&lt;string, string&gt;</code> No A key-value map of environment variables to set for the process. Values MAY use variable substitution. <p>Tool Filter Object:</p> Key Type Required Description <code>allow</code> <code>string[]</code> No A whitelist of tools to expose from this server, using just the tool name (e.g., <code>create_issue</code>, <code>read_file</code>). If specified, only these tools are available. <code>deny</code> <code>string[]</code> No A blacklist of tools to hide from this server, using just the tool name (e.g., <code>write_file</code>). Applied after <code>allow</code> filtering. <p>Filter Precedence</p> <p>When both <code>allow</code> and <code>deny</code> are specified, the tools in the <code>allow</code> list are made available and then the <code>deny</code> list is applied to remove specific tools from that filtered set. If only <code>deny</code> is specified, all tools from the server are available except those in the deny list.</p>"},{"location":"specification/#613-example-usage","title":"6.1.3. Example Usage","text":"<p>HTTP Transport Examples:</p> <p>These examples define tool connections to remote MCP servers, using the streamable HTTP transport, with authentication and tool filtering. Note the use of variable substitution for sensitive and/or variable input.</p> <pre><code>tools:\n  mcp:\n    - name: \"github_mcp_server\"\n      transport:\n        type: \"http\"\n        url: \"${env:GITHUB_MCP_URL}\"\n        authentication:\n          type: \"bearer\"\n          token: \"${env:GITHUB_OAUTH_TOKEN}\"\n      tool_filter:\n        allow:\n          - \"issues.create\"\n          - \"repos.list\"\n\n    - name: \"database_server\"\n      transport:\n        type: \"http\"\n        url: \"${env:DATABASE_MCP_URL}\"\n        authentication:\n          type: \"bearer\"\n          token: \"${env:DATABASE_API_KEY}\"\n      tool_filter:\n        allow:\n          - \"query\"\n          - \"search\"\n        deny:\n          - \"delete\"\n          - \"drop_table\"\n</code></pre> <p>STDIO Transport Examples:</p> <p>These examples demonstrate MCP tools over the STDIO transport.</p> <pre><code>tools:\n  mcp:\n    # Node.js MCP server via NPX\n    - name: \"filesystem_server\"\n      transport:\n        type: \"stdio\"\n        command: \"npx\"\n        args:\n          - \"-y\"\n          - \"@modelcontextprotocol/server-filesystem\"\n          - \"/path/to/desktop\"\n\n    # Local Python MCP server with environment variables\n    - name: \"local_database_tool\"\n      transport:\n        type: \"stdio\"\n        command: \"python\"\n        args:\n          - \"server.py\"\n        env:\n          DB_PATH: \"./data.db\"\n          API_KEY: \"${env:LOCAL_DB_API_KEY}\"\n</code></pre>"},{"location":"specification/#7-variable-substitution","title":"7. Variable Substitution","text":"<p>AFM files MAY use <code>${...}</code> syntax for variable substitution.</p> <p>This specification defines three standard variable prefixes:</p> <ul> <li>The <code>env:</code> prefix (e.g., <code>${env:API_TOKEN}</code>) is specification-defined and MUST resolve to an environment variable, generally at agent load time (i.e., variable resolution for <code>env:</code> occurs before the agent is made available for use).</li> <li>The <code>http:payload</code> prefix (e.g., <code>${http:payload.field}</code>) is specification-defined for webhook interfaces and MUST resolve to the corresponding field in the incoming webhook payload at runtime. Variable resolution for <code>http:payload</code> occurs at runtime for each webhook invocation.</li> <li>The <code>http:header</code> prefix (e.g., <code>${http:header.User-Agent}</code>) is specification-defined for webhook interfaces and MUST resolve to the corresponding HTTP header value from the incoming webhook request at runtime. Header names are case-insensitive.</li> </ul> <p>Implementations MAY define and support additional variable substitution conventions beyond those specified here. Common examples include <code>file:</code> and <code>secret:</code>, but these are implementation-defined and MAY vary between AFM implementations. The timing and semantics of resolution for these prefixes are determined by the implementation.</p>"},{"location":"specification/#71-variable-prefixes","title":"7.1. Variable Prefixes","text":"<p>The following table summarizes variable prefixes and their status:</p> Prefix Context Description Example Spec Status <code>env:</code> Static Environment variable <code>${env:API_TOKEN}</code> Spec-defined <code>http:payload</code> Runtime (webhook) Access webhook payload fields <code>${http:payload.event}</code> or <code>${http:payload['nested.field']}</code> Spec-defined <code>http:header</code> Runtime (webhook) Access HTTP request headers <code>${http:header.User-Agent}</code> or <code>${http:header.X-GitHub-Event}</code> Spec-defined <code>file:</code> Static Value from external config file <code>${file:api.baseUrl}</code> Implementation-defined <code>secret:</code> Static Value from secrets manager <code>${secret:MODEL_API_KEY}</code> Implementation-defined <p>Static vs Runtime Resolution:</p> <ul> <li>Static variables (<code>env:</code>, <code>file:</code>, <code>secret:</code>): Resolved once when the agent is loaded or initialized</li> <li>Runtime variables (<code>http:payload</code>, <code>http:header</code>): Resolved dynamically for each webhook invocation using request-specific data</li> </ul>"},{"location":"specification/#72-example-usage","title":"7.2. Example Usage","text":"<p>Static variable substitution:</p> <pre><code>authentication:\n  type: \"bearer\"\n  token: \"${env:API_TOKEN}\"        # Environment variable\ntransport:\n  url: \"${file:api.baseUrl}\"        # From external config file\n\nmodel:\n  authentication:\n    type: \"bearer\"\n    token: \"${secret:MODEL_API_KEY}\" # From secrets manager\n</code></pre> <p>Runtime variable substitution (webhook prompts):</p> <pre><code>interfaces:\n  - type: webhook\n    prompt: |\n      New GitHub ${http:payload.action} event on repository ${http:payload.repository.full_name}\n\n      Event: ${http:header.X-GitHub-Event}\n      Sender: ${http:payload.sender.login}\n\n      Details:\n      ${http:payload}\n</code></pre>"},{"location":"specification/#73-webhook-variable-access-patterns","title":"7.3. Webhook Variable Access Patterns","text":"<p>When using <code>http:payload</code> and <code>http:header</code> in webhook prompts:</p> <p>Payload Field Access (Specification Requirements):</p> <ul> <li>Implementations MUST support dot notation for nested object access (e.g., <code>${http:payload.field.nested}</code> resolves to the value of the <code>nested</code> property within the <code>field</code> object).</li> <li>Implementations MUST support bracket notation for field names containing special characters or dots (e.g., <code>${http:payload['field.with.dots']}</code> resolves to the value of the <code>field.with.dots</code> property).</li> <li>Implementations MUST support array access by index (e.g., <code>${http:payload.items[0]}</code> resolves to the first element of the <code>items</code> array).</li> <li>Implementations MUST support combined access for complex paths (e.g., <code>${http:payload.users[0].name}</code> or <code>${http:payload['special-field'][0]}</code> resolves to the <code>name</code> property of the first element in the <code>users</code> array, or the first element of the <code>special-field</code> array, respectively).</li> <li>Implementations MUST support root access, where <code>${http:payload}</code> resolves to the entire payload as a JSON string.</li> </ul> <p>Header Access (Specification Requirements):</p> <ul> <li>Implementations MUST treat header names as case-insensitive (e.g., <code>${http:header.Content-Type}</code> and <code>${http:header.content-type}</code> MUST resolve to the same value).</li> <li>Implementations MUST support access to headers with special characters (e.g., <code>${http:header.X-GitHub-Event}</code> resolves to the value of the <code>X-GitHub-Event</code> header).</li> </ul> <p>Error Handling: Implementations SHOULD handle missing or invalid variable references gracefully by using meaningful defaults or failing with clear error messages.</p>"},{"location":"specification/#8-future-work","title":"8. Future Work","text":"<p>This section outlines potential future enhancements to the AFM specification, including:</p> <ul> <li>Extending tool support to include OpenAPI-based tools for existing services and functions as tools</li> <li>First-class support for multi-agent interaction via the Agent-to-Agent (A2A) protocol</li> <li>Support for an Agent memory abstraction covering common memory patterns</li> <li>Support for Agent Identity</li> <li>Support for additional interface types (e.g., scheduled execution, REST API)</li> </ul>"},{"location":"examples/","title":"Examples","text":"Examples <p>Explore these example agents to see AFM in action</p> Friendly Assistant <p>A conversational assistant exposed via a web-based chat interface.</p> interface/webchat Math Tutor <p>A CLI-based math tutor agent that uses MCP tools for math operations.</p> interface/consolechat tools/mcp/http GitHub PR Analyzer <p>A webhook-triggered agent that detects drift between code and documentation.</p> interface/webhook tools/mcp/http"},{"location":"examples/friendly_assistant/","title":"Friendly Assistant Example","text":"<p>A conversational assistant that is exposed via a web-based chat interface.</p> friendly_assistant.afm.md <pre><code>---\nname: \"Friendly Assistant\"\ndescription: \"A friendly conversational assistant that helps users with various tasks.\"\nversion: \"0.1.0\"\nlicense: \"Apache-2.0\"\nmodel:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\ninterfaces:\n  - type: \"webchat\"\nmax_iterations: 5\n---\n\n# Role\n\nYou are a friendly and helpful conversational assistant. Your purpose is to engage in\nnatural, helpful conversations with users, answering their questions, providing\ninformation, and assisting with various tasks to the best of your abilities.\n\n# Instructions\n\n- Always respond in a friendly and conversational tone\n- Keep your responses clear, concise, and easy to understand\n- If you don't know something, be honest about it\n- Ask clarifying questions when the user's request is ambiguous\n- Be helpful and try to provide practical, actionable advice\n- Maintain context throughout the conversation\n- Show empathy and understanding in your responses\n</code></pre>"},{"location":"examples/math_tutor/","title":"Math Tutor Example","text":"<p>A CLI-based math tutor agent that uses MCP tools for math operations.</p> math_tutor.afm.md <pre><code>---\nspec_version: \"0.3.0\"\nname: \"Math Tutor\"\ndescription: \"An AI assistant that helps with math problems\"\nversion: \"1.0.0\"\nmax_iterations: 20\nmodel:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\ntools:\n  mcp:\n    - name: \"math_operations\"\n      transport:\n        type: \"http\"\n        url: \"${env:MATH_MCP_SERVER}\"\ninterfaces:\n  - type: \"consolechat\"\n---\n\n# Role\n\nYou are an experienced math tutor capable of assisting students with mathematics problems,\nproviding explanations, step-by-step solutions, and practice exercises.\n\n# Instructions\n\nYou are a knowledgeable and patient math tutor who helps students understand mathematical\nconcepts. Provide clear, step-by-step explanations for math problems, using simple language\nand avoiding jargon unless explaining it. When solving problems, show all work and explain\neach step. Use the available math operations tools when performing calculations. Explain\nmathematical concepts with real-world examples when possible. Be encouraging and supportive\nof students' efforts, ask clarifying questions if a problem is not clearly stated, provide\nmultiple approaches to solving problems when applicable, help students identify and correct\ntheir mistakes.\n</code></pre>"},{"location":"examples/pull_request_analyzer/","title":"GitHub Pull Request Analyzer Example","text":"<p>A GitHub pull request analyzer agent that detects drift between code, requirements, and documentation. It is triggered via a webhook and uses the GitHub MCP server for specific operations on pull requests.</p> pull_request_analyzer.afm.md <pre><code>---\nspec_version: \"0.3.0\"\nname: \"GitHub PR Code-Documentation Drift Checker\"\ndescription: &gt;\n  Analyzes GitHub pull requests and identifies drift between code and documentation\nversion: \"0.1.0\"\nmax_iterations: 30\nmodel:\n  name: \"gpt-4o\"\n  provider: \"openai\"\n  authentication:\n    type: \"api-key\"\n    api_key: \"${env:OPENAI_API_KEY}\"\ninterfaces:\n  - type: \"webhook\"\n    prompt: &gt;\n      Analyze the following pull request ${http:payload.pull_request.url}\n      if the action performed is one of opened, reopened, or edited.\n      Action performed - ${http:payload.action}\n    subscription:\n      protocol: \"websub\"\n      callback: \"${env:CALLBACK_URL}/github-drift-checker\"\n      secret: \"${env:GITHUB_WEBHOOK_SECRET}\"\n    exposure:\n      http:\n        path: \"/github-drift-checker\"\ntools:\n  mcp:\n    - name: \"github\"\n      transport:\n        type: \"http\"\n        url: \"https://api.githubcopilot.com/mcp/\"\n        authentication:\n          type: \"bearer\"\n          token: \"${env:GITHUB_TOKEN}\"\n      tool_filter:\n        allow:\n          - \"pull_request_read\"\n          - \"get_file_contents\"\n          - \"pull_request_review_write\"\n---\n\n# Role\n\nYou are a GitHub PR review bot that detects drift between code, requirements, and \ndocumentation. When given a URL to a pull request, you analyze the changes, \ndetect drift, and post detected drift in a comment.\n\n# Instructions\n\nFollow these steps in order:\n\n## 1. Search to Build Documentation List\n\nExtract owner and repository from the provided PR URL, then search the repository \nto discover what documentation exists:\n\n- Search for markdown files: `repo:OWNER/REPO extension:md`\n- Search for README files: `repo:OWNER/REPO filename:README`\n- Search for requirements: `repo:OWNER/REPO (requirements OR spec OR design)`\n- Create a written list of files found (this is your source of truth)\n- If searches return empty results, note \"No documentation found\"\n\n## 2. Retrieve PR Data and Baseline Documentation\n\n**Get the PR Data:**\n\n- Retrieve complete PR data including PR number, source/target branches, and changed files \nwith their diffs\n- The PR diff contains all code changes - you have everything you need from this\n- Parse the diffs to understand what was added, modified, or deleted\n\n**Retrieve Baseline Documentation:**\n- Only retrieve files from your documented list in step 1\n- Always specify the target branch when retrieving\n- These are the baseline to compare PR changes against\n- Never retrieve files not in your step 1 list\n\n## 3. Drift Detection\n\n**Categorize Changed Files:**\n- Code files: `.bal`, `.java`, `.py`, `.ts`, `.js`, etc.\n- Documentation files: `.md`, `.adoc`, README files\n- Requirements/specification files describing features, APIs, or design\n\n**Analyze Using Available Data:**\nCheck both directions:\n- **Code \u2192 Docs**: Do code changes match requirements? Are changes documented?\n- **Docs \u2192 Code**: Are all documented features actually implemented?\n\n**Detect Drift:**\nRead documentation carefully before flagging issues. Only flag drift if:\n- After reading all documentation, a feature is genuinely not mentioned anywhere\n- Code contradicts what technical specifications explicitly state\n- A new public API is added with no documentation at any level\n- Code introduces changes not reflected in any documentation\n\nDo NOT flag drift if:\n- The endpoint/feature is described in documentation (even at high level)\n- Technical spec shows API contract matching the code\n- Documentation mentions the capability the code implements\n\n## 4. Post Review Comment\n\nPost a comprehensive comment on the GitHub PR with:\n- Clear description of each drift issue found\n- Severity level (Critical/Major/Minor)\n- What changed and what's missing\n- Action required to fix\n- File references and approximate locations\n\nIf no drift detected, post: \"No drift detected between code and documentation.\"\n</code></pre>"}]}